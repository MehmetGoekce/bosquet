<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="This notebook will demonstrate the following things:" property="og:description"><meta content="Bosquet Tutorial" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><script src="https://cdn.tailwindcss.com?plugins=typography" type="text/javascript"></script><script>tailwind.config = {
  darkMode: "class",
  content: ["./tw/viewer.js", "./tw/**/*.edn"],
  safelist: ['dark'],
  theme: {
    extend: {},
    fontFamily: {
      sans: ["Fira Sans", "-apple-system", "BlinkMacSystemFont", "sans-serif"],
      serif: ["PT Serif", "serif"],
      mono: ["Fira Mono", "monospace"]
    }
  },
  variants: {
    extend: {},
  },
  plugins: [],
}
</script><style type="text/tailwindcss">@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-size: 18px;
  }
  @media (max-width: 600px) {
    html {
      font-size: 16px;
    }
  }
  .font-condensed { font-family: "Fira Sans Condensed", sans-serif; }
  .font-inter     { font-family: "Inter", sans-serif; }
  body {
    @apply font-serif antialiased text-gray-900 sm:overscroll-y-none;
  }
  code, .code {
    @apply font-mono text-sm text-gray-900 bg-slate-50 px-0.5 py-px rounded dark:bg-gray-800;
  }
  code::before, code::after { @apply content-none !important; }
  h1, h3, h4, h5, h6 {
    @apply font-condensed font-bold mt-8 first:mt-0;
  }
  h2 {
    /*We cannot collapse margins due to nesting but we want to*/
    /*keep the h2’s large margin visible*/
    @apply font-condensed font-bold mt-8 first:mt-2;
  }
  h1 { @apply text-4xl; }
  h2 { @apply text-3xl; }
  h3 { @apply text-2xl; }

  @media print {
      h1 { @apply text-2xl !important; }
      h2 { @apply text-xl !important; }
      h3 { @apply text-lg !important; }
  }

  button { @apply focus:outline-none; }
  strong { @apply font-bold; }
  em     { @apply italic; }
  pre    { @apply m-0 font-mono; }
  table img { @apply inline-block; }
}

/* Compatibility */
/* --------------------------------------------------------------- */
/* TODO: Verify which colors are in use and replace with Tailwind
   colors accordingly. Move Nj-specific styles out of here. */

:root {
  --teal-color: #31afd0;
  --dark-teal-color: #095960;
  --near-black-color: #2e2e2c;
  --red-color: #d64242;
  --dark-blue-color: #1f2937;
  --dark-blue-60-color: rgba(28, 42, 56, 0.6);
  --gray-panel-color: rgba(239, 241, 245, 1.000);
  --brand-color: var(--dark-blue-color);
  --link-color: #5046e4;
  --command-bar-selected-color: var(--teal-color);
}

.serif      { @apply font-serif; }
.sans-serif { @apply font-sans; }
.monospace  { @apply font-mono; }
.inter      { @apply font-inter; }

.border-color-teal { border-color: var(--dark-teal-color); }
.teal { color: var(--teal-color); }
.bg-dark-blue { background: var(--dark-blue-color); }
.bg-dark-blue-60 { background: rgba(28, 42, 56, 0.6); }
.bg-gray-panel { background: var(--gray-panel-color); }
.text-dark-blue  { color: var(--dark-blue-color); }
.text-dark-blue-60 { color: var(--dark-blue-60-color); }
.border-dark-blue-30 { border-color: rgba(28, 42, 56, 0.6); }
.text-brand { color: var(--dark-blue-color); }
.bg-brand { background: var(--dark-blue-color); }
.text-selected { color: white; }
.red { color: var(--red-color); }

/* Disclose Button */
/* --------------------------------------------------------------- */

.disclose {
  @apply content-none border-solid cursor-pointer inline-block relative mr-[3px] top-[-2px] transition-all;
  border-color: var(--near-black-color) transparent;
  border-width: 6px 4px 0;
}
.disclose:hover {
  border-color: var(--near-black-color) transparent;
}
.dark .disclose,
.dark .disclose:hover {
  border-color: white transparent;
}
.disclose.collapsed {
  @apply rotate-[-90deg];
}

/* Layout */
/* --------------------------------------------------------------- */

.page {
  @apply max-w-5xl mx-auto px-12 box-border flex-shrink-0;
}
.max-w-prose { @apply max-w-[46rem] !important; }
.max-w-wide  { @apply max-w-3xl !important; }

/* List Styles */
/* --------------------------------------------------------------- */

.task-list-item + .task-list-item,
.markdown-viewer ul ul {
  @apply mt-1 mb-0;
}

/* compact TOC */
.markdown-viewer .toc ul {
  list-style: none;
  @apply my-1;
}

/* Code Viewer */
/* --------------------------------------------------------------- */

.code-viewer {
  @apply font-mono bg-slate-100 rounded-sm text-sm overflow-x-auto dark:bg-gray-800;
}
.code-listing  {
    @apply -ml-8 -mr-8 relative !important;
}
.code-viewer .cm-content {
  @apply py-4 px-8;
}
@media (min-width: 960px){
    .notebook-viewer .code-viewer .cm-content {
        @apply pl-12;
    }
    .notebook-viewer .code-listing {
        width: 48rem !important;
        @apply -ml-12 mr-0 !important;
    }
}
/* Don’t show focus outline when double-clicking cell in Safari */
.cm-scroller { @apply focus:outline-none; }

/* Syntax Highlighting */
/* --------------------------------------------------------------- */

.inspected-value { @apply text-xs font-mono leading-[1.25rem]; }
.cmt-strong, .cmt-heading { @apply font-bold; }
.cmt-italic, .cmt-emphasis { @apply italic; }
.cmt-strikethrough { @apply line-through; }
.cmt-link { @apply underline; }
.untyped-value { @apply whitespace-nowrap; }

.cm-editor, .cmt-default, .result-viewer {
  @apply text-slate-800 dark:text-slate-300;
}
.cmt-keyword {
  @apply text-purple-800 dark:text-pink-400;
}
.cmt-atom, .cmt-bool, .cmt-url, .cmt-contentSeparator, .cmt-labelName {
  @apply text-blue-900 dark:text-blue-300;
}
.cmt-inserted, .cmt-literal {
  @apply text-emerald-700 dark:text-emerald-200;
}
.cmt-string, .cmt-deleted {
  @apply text-rose-700 dark:text-sky-300;
}
.cmt-italic.cmt-string {
  @apply dark:text-sky-200;
}
.cmt-regexp, .cmt-escape {
  @apply text-orange-500 dark:text-orange-300;
}
.cmt-variableName {
  @apply text-blue-800 dark:text-sky-300;
}
.cmt-typeName, .cmt-namespace {
  @apply text-emerald-600 dark:text-emerald-300;
}
.cmt-className {
  @apply text-teal-600 dark:text-teal-200;
}
.cmt-macroName {
  @apply text-teal-700 dark:text-teal-200;
}
.cmt-propertyName {
  @apply text-blue-700 dark:text-blue-200;
}
.cmt-comment {
  @apply text-slate-500 dark:text-slate-400;
}
.cmt-meta {
  @apply text-slate-600 dark:text-slate-400;
}
.cmt-invalid {
  @apply text-red-500 dark:text-red-300;
}

.result-data {
  @apply font-mono text-sm overflow-x-auto whitespace-nowrap leading-normal;
}
.result-data::-webkit-scrollbar, .path-nav::-webkit-scrollbar {
  @apply h-0;
}
.result-data-collapsed {
  @apply whitespace-nowrap;
}
.result-data-field {
  @apply ml-4 whitespace-nowrap;
}
.result-data-field-link{
  @apply ml-4 whitespace-nowrap cursor-pointer;
}
.result-data-field-link:hover {
  @apply text-black bg-black/5;
}
.result-text-empty {
  color: rgba(0,0,0,.3);
}
.browsify-button:hover {
  box-shadow: -2px 0 0 2px #edf2f7;
}

/* Prose */
/* --------------------------------------------------------------- */

.notebook-viewer,
.markdown-viewer {
  @apply prose
    dark:prose-invert
    prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
    dark:prose-a:text-blue-300
    prose-p:mt-4 prose-p:leading-snug
    prose-ol:mt-4 prose-ol:mb-6 prose-ol:leading-snug
    prose-ul:mt-4 prose-ul:mb-6 prose-ul:leading-snug
    prose-blockquote:mt-4 prose-blockquote:leading-snug
    prose-hr:mt-6 prose-hr:border-t-2 prose-hr:border-solid prose-hr:border-slate-200
    prose-figure:mt-4
    prose-figcaption:mt-2 prose-figcaption:text-xs
    prose-headings:mb-4
    prose-table:mt-0
    prose-th:mb-0
    prose-img:my-0
    prose-code:font-medium prose-code:bg-slate-100
    max-w-none;
}
.markdown-viewer blockquote p:first-of-type:before,
.markdown-viewer blockquote p:last-of-type:after {
  @apply content-none;
}
.markdown-node-viewer.result-viewer.fragment-item {
    @apply mb-0 !important;
}

/* Images */
/* --------------------------------------------------------------- */


/* Todo Lists */
/* --------------------------------------------------------------- */

.contains-task-list {
  @apply pl-6 list-none;
}
.contains-task-list input[type="checkbox"] {
  @apply appearance-none h-4 w-4 rounded border border-slate-200 relative mr-[0.3rem] ml-[-1.5rem] top-[0.15rem];
}
.contains-task-list input[type="checkbox"]:checked {
  @apply border-indigo-600 bg-indigo-600 bg-no-repeat bg-contain;
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
}

/* Markdown TOC */
/* --------------------------------------------------------------- */

.markdown-viewer .toc      { @apply mt-4; }
.markdown-viewer h1 + .toc { @apply mt-8; }

.markdown-viewer .toc h1,
.markdown-viewer .toc h2,
.markdown-viewer .toc h3,
.markdown-viewer .toc h4,
.markdown-viewer .toc h5,
.markdown-viewer .toc h6 {
  @apply text-base text-indigo-600 font-sans my-0;
}
.markdown-viewer .toc a {
  @apply text-indigo-600 font-normal no-underline hover:underline;
}
.markdown-viewer .toc li    { @apply m-0; }
.markdown-viewer .toc ul ul { @apply pl-4; }

/* Notebook Spacing */
/* --------------------------------------------------------------- */

.markdown-viewer *:first-child:not(.code-viewer):not(li):not(h2):not(.sidenote) { @apply mt-0; }
/*.viewer + .viewer { @apply mt-6; }*/
.viewer + .result-viewer { @apply mt-0; }
.code-viewer + .result-viewer { @apply mt-3; }
.markdown-viewer + .markdown-viewer { @apply mt-0; }

/* Sidenotes */
/* --------------------------------------------------------------- */

.sidenote-ref {
  @apply top-[-0.5em] w-auto h-auto inline border-0 bg-transparent m-0 pointer-events-none;
}
.sidenote {
  @apply block font-sans text-xs mt-4 bg-slate-100 dark:bg-slate-800 p-4;
  font-style: normal;
  font-weight: normal;
}
.sidenote-container {
  @apply mb-4;
}
@media (min-width: 860px) {
  .sidenote sup { @apply inline; }
  .sidenote-column {
    @apply w-[165px] absolute right-0 top-0 -mr-[205px];
  }
  .sidenote {
    @apply bg-transparent dark:bg-transparent p-0;
  }
  .sidenote:first-child {
    @apply mt-1;
  }
  .sidenotes-layout .markdown-viewer {
    @apply pr-[241px];
  }
  .sidenote-container {
    @apply relative mb-0;
  }
  .sidenotes-layout h1 {
    @apply w-[756px] !important;
  }
}
.code-viewer + .viewer:not(.code-viewer):not(.code-viewer-folded),
.code-viewer-folded + .viewer:not(.code-viewer):not(.code-viewer-folded),
.result-viewer:not(.markdown-node-viewer) + .result-viewer {
  @apply mt-2;
}
.code-viewer + .code-viewer-folded {
  @apply mt-4;
}
.result-viewer {
  @apply leading-tight mb-6;
}
.code-viewer.fragment-item.result-viewer {
  @apply mb-0 !important;
}
.result-viewer figure {
  @apply mt-0 !important;
}
@media (min-width: 768px) {
  .devcard-desc > div {
    @apply max-w-full m-0;
  }
}

/* Command Palette */
/* --------------------------------------------------------------- */

.nj-commands-input {
  @apply bg-transparent text-white;
}
.nj-context-menu-item:hover:not([disabled]) {
  @apply cursor-pointer;
  background-color: rgba(255,255,255,.14);
}

/* Devdocs */
/* --------------------------------------------------------------- */

.logo, .logo-white {
  @apply block indent-[-999em];
  background: url(/images/nextjournal-logo.svg) center center no-repeat;
}
.devdocs-body {
  @apply font-inter;
}

/* Workarounds */
/* --------------------------------------------------------------- */

/* Fixes vega viewer resizing into infinity */
.vega-embed .chart-wrapper { @apply h-auto !important; }
/* fixes fraction separators being overridden by tw’s border-color */
.katex * { @apply border-black; }

@media print {
    .dark-mode-toggle,
    .toc-toggle { @apply hidden; }
    .notebook-viewer { @apply pt-0; font-size: 12pt !important; margin-left: 0 !important; }
    .code-viewer .cm-content,
    .viewer-code .cm-content { @apply whitespace-pre-wrap !important; overflow: none; }
    .code-viewer .cm-line { font-size: 12pt !important; }
    html * { page-break-inside: avoid !important; }
    .toc-panel { @apply hidden; }
}
</style><script src="https://storage.clerk.garden/nextjournal/clerk-assets@3mwzShgnuyfhgFN9ahRYKqV32K11/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"></head><body class="dark:bg-gray-900"><div id="clerk"></div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"\" {:path [], :nextjournal/value {:toc [{:title \"Bosquet Tutorial\", :emoji nil, :path \"#bosquet-tutorial\", :items [{:title \"System Configuration\", :emoji nil, :path \"#system-configuration\", :items [{:title \"LLM services\", :emoji nil, :path \"#llm-services\", :items []}]} {:title \"A simple single template case\", :emoji nil, :path \"#a-simple-single-template-case\", :items [{:title \"Selmer templating language\", :emoji nil, :path \"#selmer-templating-language\", :items []} {:title \"Synopsis template\", :emoji nil, :path \"#synopsis-template\", :items []} {:title \"Generation\", :emoji nil, :path \"#generation\", :items [{:title \"Full Bosquet produced text\", :emoji nil, :path \"#full-bosquet-produced-text\", :items []} {:title \"Just the AI completion part\", :emoji nil, :path \"#just-the-ai-completion-part\", :items []}]}]} {:title \"Generating from templates with dependencies\", :emoji nil, :path \"#generating-from-templates-with-dependencies\", :items [{:title \"Review prompt\", :emoji nil, :path \"#review-prompt\", :items []} {:title \"Fully generated review\", :emoji nil, :path \"#fully-generated-review\", :items []} {:title \"Just a review part for the generated play synopsis\", :emoji nil, :path \"#just-a-review-part-for-the-generated-play-synopsis\", :items []}]} {:title \"Advanced templating with Selmer\", :emoji nil, :path \"#advanced-templating-with-selmer\", :items [{:title \"Tweet sentiment batch processing\", :emoji nil, :path \"#tweet-sentiment-batch-processing\", :items []}]}]}], :sidenotes? false, :toc-visibility false, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns user-guide), :file \"notebook/user_guide.clj\", :scope user-guide, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil nil [:span \"Generated with \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] \" from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href nil} \"notebook/user_guide.clj\" nil]]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}, :open-graph {:type \"article:clerk\", :title \"Bosquet Tutorial\", :description \"This notebook will demonstrate the following things:\"}, :title \"Bosquet Tutorial\", :blocks [{:path [], :nextjournal/value \"(ns user-guide\\n  (:require [bosquet.llm.generator :as bg]\\n            [bosquet.system :as system]\\n            [nextjournal.clerk :as clerk]))\", :nextjournal/render-opts {:loc {:line 1, :end-line 4, :column 1, :end-column 44}, :id \"user-guide/anon-expr-5dqrfDzj9kp4A7wP5eGK4A6FuiJmKL-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5dqwLijpGm2D58fzD82pNQkaHnC9Ej\"} [\"h1\" {:id \"bosquet-tutorial\"} [:<> \"Bosquet Tutorial\"]] [:p [:<> \"This notebook will demonstrate the following things:\"]] [:ul [:li [:<> [:<> \"system configuration\"]]] [:li [:<> [:<> \"define prompt \"] [:em [:<> \"templates\"]]]] [:li [:<> [:<> \"resolve \"] [:em [:<> \"dependencies\"]] [:<> \" between prompts\"]]] [:li [:<> [:<> \"produce AI \"] [:em [:<> \"completions\"]] [:<> \".\"]]]] [\"h2\" {:id \"system-configuration\"} [:<> \"System Configuration\"]] [:p [:em [:<> \"Bosquet\"]] [:<> \" uses \"] [:a {:href \"https://github.com/weavejester/integrant\"} [:<> \"Integrant\"]] [:<> \" to setup its\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"components. With \"] [:a {:href \"https://github.com/juxt/aero\"} [:<> \"Aero\"]] [:<> \" brining in some nice configuration\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"setup features to make it easier to declare and use configuration.\"]] [:p [:<> \"Prensently \"] [:em [:<> \"Bosquet\"]] [:<> \" defines two types of components:\"]] [:ol [:li [:<> [:<> \"LLM services\"]]] [:li [:<> [:<> \"Tools for the Agnets to use\"]]]] [\"h3\" {:id \"llm-services\"} [:<> \"LLM services\"]] [:p [:<> \"LLM service componens wrap access to the APIs provided by the likes of \"] [:em [:<> \"OpenAI\"]] [:<> \", \"] [:em [:<> \"Cohere\"]] [:<> \",\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"maybe localy deployed llamas.\"]] [:p [:<> \"Let's take as an example OpenAI model access on MS Azure\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:div.code-viewer.code-listing [#viewer-eval nextjournal.clerk.render/inspect-presented {:path [0], :nextjournal/value \"[:llm/openai :provider/azure]\\n{:api-key      #ref [:config :azure-openai-api-key]\\n :api-endpoint #or [#env \\\"AZURE_OPENAI_API_ENDPOINT\\\"\\n                    #ref [:config :azure-openai-api-endpoint]]\\n :impl         :azure}\", :nextjournal/render-opts {:language \"edn\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5dsJQw12yyyd7TcZEf52VSHxnqnJUC\"}}]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:p [:<> \"As per \"] [:em [:<> \"Integrant\"]] [:<> \" setup \"] [:code [:<> \"[:llm/openai :provider/azure]\"]] [:<> \" is the key to the component, the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"value specifies all the properties needed to start it up. Note the \"] [:code [:<> \"#or\"]] [:<> \" construct coming\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"from \"] [:em [:<> \"Aero\"]] [:<> \" which allows to take values either from environment variables or from the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"config file.\"]] [:p [:<> \"See the text generation examples bellow on how to use LLM components to generate text.\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:em [:<> \"Bosquet\"]] [:<> \" allows you to change the LLM in use while processing the chained prompts.\"]] [\"h2\" {:id \"a-simple-single-template-case\"} [:<> \"A simple single template case\"]] [:p [:<> \"Let's say we want to generate a synopsis of the play, based only on the \"] [:code [:<> \"title\"]] [:<> \" and \"] [:code [:<> \"genre\"]] [:<> \" we want this play to be in.\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"Something like this:\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5dqwLijpGm2D58fzD82pNQkaHnC9Ej\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div.whitespace-pre-line.max-w-wide.bg-white.p-4.text-slate-500.text-sm \"Title:\\nThe Fifth Man\\n\\nGenre:\\nCrime Drama\\n\\nSynopsys:\\nThe Fifth Man is a suspenseful crime drama set in a small town in the USA. Five childhood friends, now in their mid-twenties, have grown up together and are as close as brothers. One evening, the group is out at a nightclub wherein the lead of the group, John, finds an envelope stuffed with hundreds of thousands of dollars. Despite their better judgment, John and his friends decide to keep the money and use it to fund a life of pleasure and excitement.\"], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5drkWSztUYQq9S5fsPK22cNia4WFFY-result\"}}, :nextjournal/blob-id \"5dtF9kRsLwRdDBevoMe2sNpAGZcdAU\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5drkWSztUYQq9S5fsPK22cNia4WFFY-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5dqp4Moj2Aec5Zw11YUaihtCWHZyr4\"} [:p [:<> \"For this we will need to define a template with prompt and slots for data insertion.\"]] [\"h3\" {:id \"selmer-templating-language\"} [:<> \"Selmer templating language\"]] [:p [:<> \"Prompt template definition is done with \"] [:a {:href \"https://github.com/zmedelis/Selmer\"} [:<> \"Selmer\"]] [:<> \" templating library.\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"It uses \"] [:code [:<> \"{{DATA}}\"]] [:<> \" syntax to specify where data needs to be injected.\"]] [:p [:em [:<> \"Bosquet\"]] [:<> \" adds to \"] [:em [:<> \"Selmer\"]] [:<> \" a specification of where AI generation calls should\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"happen. This is indicated with the \"] [:code [:<> \"{% gen %}\"]] [:<> \" \"] [:a {:href \"https://github.com/zmedelis/Selmer#tags\"} [:<> \"tag\"]] [:<> \".\"]] [:p [:<> \"Generation is done with the following \"] [:em [:<> \"Bosquet\"]] [:<> \" features:\"]] [:ul [:li [:<> [:code [:<> \"gen\"]] [:<> \" will recieve all the text preceeding it with already filled in template slots. This text\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"is used as the prompt to be sent to the competion API.\"]]] [:li [:<> [:code [:<> \"system\"]] [:<> \" defines completion components implementing API call to LLM provider\"]]]] [\"h3\" {:id \"synopsis-template\"} [:<> \"Synopsis template\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5dqp4Moj2Aec5Zw11YUaihtCWHZyr4\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def synopsis-template\\n  \\\"You are a playwright. Given the play's title and it's genre\\nit is your job to write synopsis for that play.\\n\\nTitle: {{title}}\\nGenre: {{genre}}\\n\\nPlaywright: This is a synopsis for the above play:\\n{% gen model=gpt-3.5 var-name=play %}\\\")\", :nextjournal/render-opts {:loc {:line 80, :end-line 88, :column 1, :end-column 40}, :id \"user-guide/synopsis-template-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [\"You are a playwright. Given the play's title and it's genre\\nit is your job to wr\" {:nextjournal/value {:n 80, :path [], :total 232, :offset 80, :replace-path [80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}, :nextjournal/render-opts {:id \"user-guide/synopsis-template-result\"}}, :nextjournal/blob-id \"5drm8pGFYhBDt17URGo2dreUHvEg9a\"}, :nextjournal/render-opts {:id \"user-guide/synopsis-template-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5drw143wc2mxPm9kUcbVd3WKBq2thh\"} [:p [:<> \"Note the optional \"] [:code [:<> \"var-name\"]] [:<> \" parameter. This is the name of the var to hold\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"generation generation result and it can an be used as a reference in other templates\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"or the same template further down. If \"] [:code [:<> \"var-name\"]] [:<> \" is  not specified \"] [:code [:<> \"gen\"]] [:<> \" will be\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"used as the name.\"]] [\"h3\" {:id \"generation\"} [:<> \"Generation\"]] [:p [:<> \"Bosquet will be invoking \"] [:em [:<> \"OpenAI API\"]] [:<> \" thus make sure that \"] [:code [:<> \"OPENAI_API_KEY\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"is present as the environment variable.\"]] [:p [:code [:<> \"gen\"]] [:<> \" call to the \"] [:em [:<> \"OpenAI\"]] [:<> \" will use configuration parameters specfied\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"in that tag and reflect parameters specified by \"] [:a {:href \"https://beta.openai.com/docs/api-reference/completions\"} [:<> \"Open AI API\"]] [:<> \".\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"The tag uses the same names. If config parameters are not used, then defaults\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"are used. Note that default model is \"] [:em [:<> \"Ada\"]] [:<> \", in production \"] [:em [:<> \"Davinci\"]] [:<> \" would be a\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"nautural choice.\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:div.code-viewer.code-listing [#viewer-eval nextjournal.clerk.render/inspect-presented {:path [0], :nextjournal/value \"{model             ada\\n temperature       0.6\\n max-tokens        80\\n presence-penalty  0.4\\n frequence-penalty 0.2\\n top-p             1\\n n                 1}\", :nextjournal/render-opts {:language \"clojure\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5dsJQw12yyyd7TcZEf52VSHxnqnJUC\"}}]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:p [:<> \"The call to generation function takes in:\"]] [:ul [:li [:<> [:code [:<> \"template\"]] [:<> \" defined above\"]]] [:li [:<> [:code [:<> \"data\"]] [:<> \" is the data to fill in the template slots (\"] [:code [:<> \"title\"]] [:<> \" and \"] [:code [:<> \"genre\"]] [:<> \")\"]]]] [:p [:<> \"The generation comes back with a tuple where the \"] [:em [:<> \"first\"]] [:<> \" member will contain all\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"the text which got its slots filled in and generated completion.\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"The \"] [:em [:<> \"second\"]] [:<> \" member of the tuple will contain only the AI-completed part.\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5drw143wc2mxPm9kUcbVd3WKBq2thh\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def synopsis\\n  (bg/complete-template\\n   synopsis-template\\n   {:title \\\"Mr. X\\\" :genre \\\"crime\\\"}))\", :nextjournal/render-opts {:loc {:line 124, :end-line 127, :column 1, :end-column 37}, :id \"user-guide/synopsis-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [\"You are a playwright. Given the play's title and it's genre\\nit is your job to wr\" {:nextjournal/value {:n 80, :path [0], :total 1757, :offset 80, :replace-path [0 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value [{:path [1 0 0], :nextjournal/value :play, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [1 0 1], :nextjournal/value [\"\\\"Mr. X\\\" is a gripping crime thriller that unravels the dark underbelly of a city\" {:nextjournal/value {:n 80, :path [1 0 1], :total 1570, :offset 80, :replace-path [1 0 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\" \"}\" \"]\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}, :nextjournal/render-opts {:id \"user-guide/synopsis-result\"}}, :nextjournal/blob-id \"5ds8XH7sKpCszmMYnNBFiP9ztYQX25\"}, :nextjournal/render-opts {:id \"user-guide/synopsis-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5drv5Z8wYQXBWo76XQJhYtcD1NN1K3\"} [\"h4\" {:id \"full-bosquet-produced-text\"} [:<> \"Full \"] [:em [:<> \"Bosquet\"]] [:<> \" produced text\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5drv5Z8wYQXBWo76XQJhYtcD1NN1K3\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div.whitespace-pre-line.max-w-wide.bg-white.p-4.text-slate-500.text-sm \"You are a playwright. Given the play's title and it's genre\\nit is your job to write synopsis for that play.\\n\\nTitle: Mr. X\\nGenre: crime\\n\\nPlaywright: This is a synopsis for the above play:\\n\\\"Mr. X\\\" is a gripping crime thriller that unravels the dark underbelly of a city plagued by corruption and deceit. The play centers around the mysterious character of Mr. X, a notorious criminal mastermind who effortlessly manipulates those around him to further his nefarious agenda.\\n\\nAmidst a string of high-profile heists and a wave of unsolved murders, Detective Sarah Roberts becomes obsessed with capturing Mr. X and putting an end to his reign of terror. As she delves deeper into the investigation, she uncovers a complex web of secrets, double-crosses, and unexpected alliances that blur the line between right and wrong.\\n\\nThe tension rises as the city's underworld factions become aware of Detective Roberts' pursuit of Mr. X, leading to a deadly cat-and-mouse game filled with thrilling twists and turns. Loyalties are tested, and no one is safe as the truth slowly unravels, leaving both the audience and the characters questioning who can be trusted.\\n\\nAs the final act approaches, the climactic confrontation between Detective Roberts and Mr. X promises to leave the audience on the edge of their seats. Will justice prevail, or will Mr. X's intricate web of power and influence prove too formidable to be dismantled?\\n\\n\\\"Mr. X\\\" is a dark and unpredictable crime drama that explores themes of morality, power, and the lengths to which individuals will go to protect their secrets. With its compelling characters, intense plot twists, and a finale that will leave audiences breathless, this play is sure to captivate and engage theatergoers until the very end.\"], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5dsS9FsfyuLeYQT2XCXfxk2oxpBTrp-result\"}}, :nextjournal/blob-id \"5dqq8xAnkF33aboFafwomc4i97seRC\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5dsS9FsfyuLeYQT2XCXfxk2oxpBTrp-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5du58fodinJY4bhHBF1Qj7PDToe6LU\"} [\"h4\" {:id \"just-the-ai-completion-part\"} [:<> \"Just the AI completion part\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5du58fodinJY4bhHBF1Qj7PDToe6LU\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div.whitespace-pre-line.max-w-wide.bg-white.p-4.text-slate-500.text-sm \"\\\"Mr. X\\\" is a gripping crime thriller that unravels the dark underbelly of a city plagued by corruption and deceit. The play centers around the mysterious character of Mr. X, a notorious criminal mastermind who effortlessly manipulates those around him to further his nefarious agenda.\\n\\nAmidst a string of high-profile heists and a wave of unsolved murders, Detective Sarah Roberts becomes obsessed with capturing Mr. X and putting an end to his reign of terror. As she delves deeper into the investigation, she uncovers a complex web of secrets, double-crosses, and unexpected alliances that blur the line between right and wrong.\\n\\nThe tension rises as the city's underworld factions become aware of Detective Roberts' pursuit of Mr. X, leading to a deadly cat-and-mouse game filled with thrilling twists and turns. Loyalties are tested, and no one is safe as the truth slowly unravels, leaving both the audience and the characters questioning who can be trusted.\\n\\nAs the final act approaches, the climactic confrontation between Detective Roberts and Mr. X promises to leave the audience on the edge of their seats. Will justice prevail, or will Mr. X's intricate web of power and influence prove too formidable to be dismantled?\\n\\n\\\"Mr. X\\\" is a dark and unpredictable crime drama that explores themes of morality, power, and the lengths to which individuals will go to protect their secrets. With its compelling characters, intense plot twists, and a finale that will leave audiences breathless, this play is sure to captivate and engage theatergoers until the very end.\"], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5dqzvRp8eb9sqqvhShcyFsWG3Kn2np-result\"}}, :nextjournal/blob-id \"5dt169ELUtzTGGYUwp9VtoiRr9R8SY\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5dqzvRp8eb9sqqvhShcyFsWG3Kn2np-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5dsVY1nzqWtTrJE6TBMEt8AoAXpM9j\"} [\"h2\" {:id \"generating-from-templates-with-dependencies\"} [:<> \"Generating from templates with dependencies\"]] [:p [:<> \"With the play synopsis generated, we want to add a review of that play.\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"The review prompt template will depend on synopsis generation. With \"] [:em [:<> \"Bosquet\"]] [:<> \" we\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"do not need to worry about resolving the dependencies it will\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"be done automatically (powered by \"] [:a {:href \"https://pathom3.wsscode.com/\"} [:<> \"Pathom\"]] [:<> \").\"]] [\"h3\" {:id \"review-prompt\"} [:<> \"Review prompt\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5dsVY1nzqWtTrJE6TBMEt8AoAXpM9j\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def review-template\\n  \\\"You are a play critic from the New York Times.\\nGiven the synopsis of play, it is your job to write a review for that play.\\n\\nPlay Synopsis:\\n{{play}}\\n\\nReview from a New York Times play critic of the above play:\\n{% gen model=gpt-3.5 var-name=review %}\\\")\", :nextjournal/render-opts {:loc {:line 146, :end-line 154, :column 1, :end-column 42}, :id \"user-guide/review-template-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [\"You are a play critic from the New York Times.\\nGiven the synopsis of play, it is\" {:nextjournal/value {:n 80, :path [], :total 248, :offset 80, :replace-path [80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}, :nextjournal/render-opts {:id \"user-guide/review-template-result\"}}, :nextjournal/blob-id \"5du3jLSmA2MoozibzR8M1LmeoYmxLW\"}, :nextjournal/render-opts {:id \"user-guide/review-template-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5dqzomD7hdgrUyYvEQANrFysRjNdkU\"} [:p [:<> \"Both templates need to be added to a map to be jointly processed by \"] [:em [:<> \"Bosquet\"]] [:<> \".\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5dqzomD7hdgrUyYvEQANrFysRjNdkU\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def play-review\\n  {:synopsis  synopsis-template\\n   :evrything review-template})\", :nextjournal/render-opts {:loc {:line 158, :end-line 160, :column 1, :end-column 32}, :id \"user-guide/play-review-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value :evrything, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [0 1], :nextjournal/value [\"You are a play critic from the New York Times.\\nGiven the synopsis of play, it is\" {:nextjournal/value {:n 80, :path [0 1], :total 248, :offset 80, :replace-path [0 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value :synopsis, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [1 1], :nextjournal/value [\"You are a playwright. Given the play's title and it's genre\\nit is your job to wr\" {:nextjournal/value {:n 80, :path [1 1], :total 232, :offset 80, :replace-path [1 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\" \"}\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}, :nextjournal/render-opts {:id \"user-guide/play-review-result\"}}, :nextjournal/blob-id \"5dt8YSVbXfTDMGa9BN5AxoMuWPFVFh\"}, :nextjournal/render-opts {:id \"user-guide/play-review-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5droaoLAcxPrVK7hLCbhwLgz4BK44d\"} [:p [:<> \"The review prompt template contains familiar call to generation function and\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"a reference - \"] [:code [:<> \"{{play}}\"]] [:<> \" - to generated text for the synopsis.\"]] [:p [:<> \"To process this more advanced case of templates in the dependency graph,\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:em [:<> \"Bosquet\"]] [:<> \" provides the \"] [:code [:<> \"gen/complete\"]] [:<> \" function taking:\"]] [:ul [:li [:<> [:code [:<> \"prompts\"]] [:<> \" map defined above\"]]] [:li [:<> [:code [:<> \"data\"]] [:<> \" to fill in fixed slots (Selmer templating)\"]]]]], :nextjournal/render-opts {:id \"user-guide/markdown-5droaoLAcxPrVK7hLCbhwLgz4BK44d\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def review (bg/generate\\n              play-review\\n              {:title \\\"Mr. X\\\" :genre \\\"crime\\\"}\\n              {:synopsis  (system/openai)\\n               :evrything (system/openai)}))\", :nextjournal/render-opts {:loc {:line 170, :end-line 174, :column 1, :end-column 45}, :id \"user-guide/review-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value :evrything, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [0 1], :nextjournal/value [\"You are a play critic from the New York Times.\\nGiven the synopsis of play, it is\" {:nextjournal/value {:n 80, :path [0 1], :total 4541, :offset 80, :replace-path [0 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value :genre, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [1 1], :nextjournal/value \"crime\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}} {:path [2], :nextjournal/value [{:path [2 0], :nextjournal/value :play, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [2 1], :nextjournal/value [\"Mr. X Synopsis:\\n\\nIn the crime-ridden city of Newhart, a mysterious figure known \" {:nextjournal/value {:n 80, :path [2 1], :total 1531, :offset 80, :replace-path [2 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}} {:path [3], :nextjournal/value [{:path [3 0], :nextjournal/value :review, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [3 1], :nextjournal/value [\"Title: \\\"Mr. X\\\" Thrills and Engages with Its Intricate Web of Mystery and Moralit\" {:nextjournal/value {:n 80, :path [3 1], :total 2809, :offset 80, :replace-path [3 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}} {:path [4], :nextjournal/value [{:path [4 0], :nextjournal/value :synopsis, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [4 1], :nextjournal/value [\"You are a playwright. Given the play's title and it's genre\\nit is your job to wr\" {:nextjournal/value {:n 80, :path [4 1], :total 1718, :offset 80, :replace-path [4 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}} {:path [5], :nextjournal/value [{:path [5 0], :nextjournal/value :title, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [5 1], :nextjournal/value \"Mr. X\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\" \"}\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}, :nextjournal/render-opts {:id \"user-guide/review-result\"}}, :nextjournal/blob-id \"5dtXc9yAvyBadDbDrrzDmLDBgXh3x9\"}, :nextjournal/render-opts {:id \"user-guide/review-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5dswwY94mGJzzTFTQ1QA3mAxYnPjH7\"} [\"h3\" {:id \"fully-generated-review\"} [:<> \"Fully generated review\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5dswwY94mGJzzTFTQ1QA3mAxYnPjH7\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div.whitespace-pre-line.max-w-wide.bg-white.p-4.text-slate-500.text-sm \"You are a play critic from the New York Times.\\nGiven the synopsis of play, it is your job to write a review for that play.\\n\\nPlay Synopsis:\\nMr. X Synopsis:\\n\\nIn the crime-ridden city of Newhart, a mysterious figure known only as Mr. X emerges onto the scene. Nobody knows his true identity or motive, but his actions are sending shockwaves through the criminal underworld.\\n\\nAs the story unfolds, we meet a dedicated detective named Olivia Parker, who becomes obsessed with bringing Mr. X to justice. Olivia is determined to unravel the enigma behind this elusive figure, using all of her wit and skills to piece together the clues left behind by Mr. X's crimes.\\n\\nMeanwhile, a notorious crime lord named Victor Russo grows increasingly agitated by Mr. X's interference with his operations. Determined to maintain his control, Victor sets out to uncover Mr. X's true identity and eliminate him once and for all.\\n\\nAs the cat-and-mouse game between Olivia, Mr. X, and Victor intensifies, the lines between right and wrong blur. The play explores themes of morality, justice, and the lengths people will go to protect their own interests.\\n\\nWith each twist and turn, the audience is kept on the edge of their seats, eagerly anticipating the reveal of Mr. X's true identity. Will Olivia succeed in her quest for justice, or will Mr. X's cunning prove too much to handle? And what secrets will be unearthed along the way?\\n\\n\\\"Mr. X\\\" is a thrilling crime drama that delves into the complexities of the human psyche and the choices we make when faced with moral dilemmas. Prepare to be captivated by a story of suspense, intrigue, and the pursuit of truth in a city consumed by crime.\\n\\nReview from a New York Times play critic of the above play:\\nTitle: \\\"Mr. X\\\" Thrills and Engages with Its Intricate Web of Mystery and Morality\\n\\nRating: ★★★★☆ (4 out of 5 stars)\\n\\nIn the gritty world of \\\"Mr. X,\\\" the audience is transported to the crime-ridden city of Newhart, where the line between right and wrong becomes blurred. This thrilling crime drama, written and directed by an unknown talent, captivates from the moment the curtains rise, delivering a tale of suspense, intrigue, and moral exploration.\\n\\nThe play revolves around the enigmatic and elusive figure known only as Mr. X, whose actions send shockwaves through the criminal underworld. With a gripping performance by an unidentified actor, Mr. X sparks fascination and bewilderment, leaving the audience guessing about his true identity and motive until the very end.\\n\\nAt the center of the narrative is Detective Olivia Parker, played masterfully by [lead actress], whose dedication to solving the mystery of Mr. X becomes an obsession. Olivia's relentless pursuit of justice lays bare the depths of her character, expertly portrayed with a mix of determination and vulnerability. The chemistry between Parker and Mr. X is electric, as the cat-and-mouse game they play leaves the audience on the edge of their seats.\\n\\nAdditionally, the performance of [actor] in the role of crime lord Victor Russo adds an extra layer of tension. His portrayal of a man determined to maintain his control over the criminal underworld is menacing and chilling. The dynamic between Russo and Mr. X sparks a clash of egos, further heightening the suspense and intrigue.\\n\\nThe play's strength lies in its exploration of moral dilemmas and the choices individuals make when faced with them. The audience is forced to question their own sense of justice and ponder whether the pursuit of truth sometimes collides with personal interests. The script challenges our notions of right and wrong, leaving us pondering the consequences of our actions long after the final bows.\\n\\nThe immersive set design and lighting effectively create the gritty atmosphere of Newhart, the city permeated by crime. The attention to detail in creating a visually stunning representation of a dark and dangerous world is commendable, offering an additional layer of immersion.\\n\\nWhile \\\"Mr. X\\\" keeps the audience engaged with its intricate plot and strong performances, it occasionally falters with pacing issues, particularly in the second act. A tighter focus on certain subplots would have contributed to a more seamless flow of the narrative.\\n\\nDespite this minor flaw, \\\"Mr. X\\\" is a must-see for lovers of crime dramas and those who revel in the exploration of human morality. This production successfully balances suspense, mystery, and thought-provoking themes, embodying the very essence of the theater as a vehicle for captivating storytelling.\"], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5dqvu8U9K8h4vLR4FeamB7jgevoDp7-result\"}}, :nextjournal/blob-id \"5ds2wWyftSaDfAEkWzz6YypH4Cwyqi\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5dqvu8U9K8h4vLR4FeamB7jgevoDp7-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5dsmRcb1iESFXWj94qJbbaht2tg4Gf\"} [\"h3\" {:id \"just-a-review-part-for-the-generated-play-synopsis\"} [:<> \"Just a review part for the generated play synopsis\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5dsmRcb1iESFXWj94qJbbaht2tg4Gf\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div.whitespace-pre-line.max-w-wide.bg-white.p-4.text-slate-500.text-sm \"Title: \\\"Mr. X\\\" Thrills and Engages with Its Intricate Web of Mystery and Morality\\n\\nRating: ★★★★☆ (4 out of 5 stars)\\n\\nIn the gritty world of \\\"Mr. X,\\\" the audience is transported to the crime-ridden city of Newhart, where the line between right and wrong becomes blurred. This thrilling crime drama, written and directed by an unknown talent, captivates from the moment the curtains rise, delivering a tale of suspense, intrigue, and moral exploration.\\n\\nThe play revolves around the enigmatic and elusive figure known only as Mr. X, whose actions send shockwaves through the criminal underworld. With a gripping performance by an unidentified actor, Mr. X sparks fascination and bewilderment, leaving the audience guessing about his true identity and motive until the very end.\\n\\nAt the center of the narrative is Detective Olivia Parker, played masterfully by [lead actress], whose dedication to solving the mystery of Mr. X becomes an obsession. Olivia's relentless pursuit of justice lays bare the depths of her character, expertly portrayed with a mix of determination and vulnerability. The chemistry between Parker and Mr. X is electric, as the cat-and-mouse game they play leaves the audience on the edge of their seats.\\n\\nAdditionally, the performance of [actor] in the role of crime lord Victor Russo adds an extra layer of tension. His portrayal of a man determined to maintain his control over the criminal underworld is menacing and chilling. The dynamic between Russo and Mr. X sparks a clash of egos, further heightening the suspense and intrigue.\\n\\nThe play's strength lies in its exploration of moral dilemmas and the choices individuals make when faced with them. The audience is forced to question their own sense of justice and ponder whether the pursuit of truth sometimes collides with personal interests. The script challenges our notions of right and wrong, leaving us pondering the consequences of our actions long after the final bows.\\n\\nThe immersive set design and lighting effectively create the gritty atmosphere of Newhart, the city permeated by crime. The attention to detail in creating a visually stunning representation of a dark and dangerous world is commendable, offering an additional layer of immersion.\\n\\nWhile \\\"Mr. X\\\" keeps the audience engaged with its intricate plot and strong performances, it occasionally falters with pacing issues, particularly in the second act. A tighter focus on certain subplots would have contributed to a more seamless flow of the narrative.\\n\\nDespite this minor flaw, \\\"Mr. X\\\" is a must-see for lovers of crime dramas and those who revel in the exploration of human morality. This production successfully balances suspense, mystery, and thought-provoking themes, embodying the very essence of the theater as a vehicle for captivating storytelling.\"], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5dsZL3oB4CoNgmUyF5ApoPpZDL5GRR-result\"}}, :nextjournal/blob-id \"5dt88TQbKWnda39fBQaoBYULdMUiLe\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5dsZL3oB4CoNgmUyF5ApoPpZDL5GRR-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5dtpMDThQd6YkdjdFGnh6w6cPLJsue\"} [\"h2\" {:id \"advanced-templating-with-selmer\"} [:<> \"Advanced templating with Selmer\"]] [:p [:a {:href \"https://github.com/yogthos/Selmer\"} [:em [:<> \"Selmer\"]]] [:<> \" provides lots of great templating\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"functionality. An example of some of those features.\"]] [\"h3\" {:id \"tweet-sentiment-batch-processing\"} [:<> \"Tweet sentiment batch processing\"]] [:p [:<> \"Lets say we want to get a batch sentiment processor for Tweets.\"]] [:p [:<> \"A template for that:\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5dtpMDThQd6YkdjdFGnh6w6cPLJsue\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def sentimental\\n  \\\"Estimate the sentiment of the following batch of {{text-type|default:text}} as positive, negative or neutral:\\n{% for t in tweets %}\\n* {{t}}\\n{% endfor %}\\n\\nSentiments:\\n{% gen model=gpt-3.5 %}\\\")\", :nextjournal/render-opts {:loc {:line 197, :end-line 204, :column 1, :end-column 26}, :id \"user-guide/sentimental-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [\"Estimate the sentiment of the following batch of {{text-type|default:text}} as p\" {:nextjournal/value {:n 80, :path [], :total 189, :offset 80, :replace-path [80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}, :nextjournal/render-opts {:id \"user-guide/sentimental-result\"}}, :nextjournal/blob-id \"5duGYqRUrfjioMaRhSXsyFCHEW6NLC\"}, :nextjournal/render-opts {:id \"user-guide/sentimental-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5dtDsRR9CAq79spEHZDMBFdmuMoHgm\"} [:p [:<> \"First, \"] [:em [:<> \"Selmer\"]] [:<> \" provides \"] [:a {:href \"https://github.com/yogthos/Selmer#for\"} [:<> \"for tag\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"to process collections of data.\"]] [:p [:<> \"Then, \"] [:code [:<> \"{{text-type|default:text}}\"]] [:<> \" shows how defaults can be used. In this case\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}}] [:<> \"if \"] [:code [:<> \"text-type\"]] [:<> \" is not specified \"] [:code [:<> \"\\\"text\\\"\"]] [:<> \" will be used.\"]] [:p [:<> \"Tweets to be processed\"]]], :nextjournal/render-opts {:id \"user-guide/markdown-5dtDsRR9CAq79spEHZDMBFdmuMoHgm\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value \"(def tweets\\n   [\\\"How did everyone feel about the Climate Change question last night? Exactly.\\\"\\n    \\\"Didn't catch the full #GOPdebate last night. Here are some of Scott's best lines in 90 seconds.\\\"\\n    \\\"The biggest disappointment of my life came a year ago.\\\"])\", :nextjournal/render-opts {:loc {:line 213, :end-line 216, :column 1, :end-column 63}, :id \"user-guide/tweets-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value \"How did everyone feel about the Climate Change question last night? Exactly.\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [1], :nextjournal/value [\"Didn't catch the full #GOPdebate last night. Here are some of Scott's best lines\" {:nextjournal/value {:n 80, :path [1], :total 95, :offset 80, :replace-path [1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [2], :nextjournal/value \"The biggest disappointment of my life came a year ago.\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\" \"]\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}, :nextjournal/render-opts {:id \"user-guide/tweets-result\"}}, :nextjournal/blob-id \"5duFRNRj7TXNZrhC7dQK6EWHPXdpCU\"}, :nextjournal/render-opts {:id \"user-guide/tweets-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value \"(def sentiments (bg/complete-template sentimental\\n                  {:text-type \\\"tweets\\\" :tweets tweets}\\n                  ;; It is the same as in `review` example, just not using\\n                  ;; `system/openai` helper\\n                  {:gen [:llm/openai :provider/openai]}))\", :nextjournal/render-opts {:loc {:line 218, :end-line 222, :column 1, :end-column 58}, :id \"user-guide/sentiments-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dru1FUcVRTRrVKJFbNw4FG2wXmiwB\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [\"Estimate the sentiment of the following batch of tweets as positive, negative or\" {:nextjournal/value {:n 80, :path [0], :total 662, :offset 80, :replace-path [0 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value [{:path [1 0 0], :nextjournal/value :for, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [1 0 1], :nextjournal/value [\"\\n* How did everyone feel about the Climate Change question last night? Exactly.\\n\" {:nextjournal/value {:n 80, :path [1 0 1], :total 237, :offset 80, :replace-path [1 0 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}} {:path [1 1], :nextjournal/value [{:path [1 1 0], :nextjournal/value :gen, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #viewer-fn (fn [x] [:span.cmt-atom.inspected-value (str x)]), :hash \"5dsfx9mcALxzChApdWd2EzRdf4zLLp\"}} {:path [1 1 1], :nextjournal/value [\"1. Neutral - The tweet is asking for opinions on a certain topic, but does not e\" {:nextjournal/value {:n 80, :path [1 1 1], :total 321, :offset 80, :replace-path [1 1 1 80]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5drduatKq2QJCDhSX1Pu45i4whSPHk\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\" \"}\" \"]\"), :page-size 80, :hash \"5dsDiKZaSjZpuyav79P69dRKiDtE2s\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #viewer-fn (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)), :page-size 2, :hash \"5dsxFB9emxPBEJRUNCz6BJ73x9BinY\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-map, :opening-paren \"{\", :page-size 10, :hash \"5drc3ac5ux7kS4h2vozdxwsrKDqSmn\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :page-size 20, :hash \"5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f\"}, :nextjournal/render-opts {:id \"user-guide/sentiments-result\"}}, :nextjournal/blob-id \"5dtgc8EC94LW5p3TktYdDrSvSGnzF8\"}, :nextjournal/render-opts {:id \"user-guide/sentiments-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"user-guide/markdown-5drouVNduCSGzZaMkXmqUBgw5ypS7u\"} [:p [:<> \"Generation results in the same order as \"] [:code [:<> \"tweets\"]]]], :nextjournal/render-opts {:id \"user-guide/markdown-5drouVNduCSGzZaMkXmqUBgw5ypS7u\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:pre \"1. Neutral - The tweet is asking for opinions on a certain topic, but does not express a clear sentiment.\\n2. Neutral - The tweet mentions sharing some lines from the debate, but does not convey a positive or negative sentiment.\\n3. Negative - The tweet indicates a personal disappointment, suggesting a negative sentiment.\"], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5duCFfXVTUy3hS7LPDo6GdUrc3FGCs-result\"}}, :nextjournal/blob-id \"5dsAvMwsRAdfZvetyYpM8VuTQUxrba\"}, :nextjournal/render-opts {:id \"user-guide/anon-expr-5duCFfXVTUy3hS7LPDo6GdUrc3FGCs-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dtGVHesd2XCTLFYF3aY4kJvkrX1x1\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5duAFDxE4sCnRX71Wo6zeCpC9C3djE\"}}}, :current-path \"\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@3mwzShgnuyfhgFN9ahRYKqV32K11/viewer.js?immutable=true\"}, :index \"notebook/user_guide.clj\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>